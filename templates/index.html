{% extends 'base.html' %}
{% load static %}

<script>
    {% block javascript %}
    //leaflet map
    var map = initMap('map');

    var markers = L.markerClusterGroup(); // Leaflet's cluster group

    addMarkersComplaint({{ complaints|safe }}, true, map, markers);
    {% endblock %}
</script>

{% block content %}
<div id="loginAlert" class="alert alert-success text-center collapse" role="alert">

  <button type="button" class="close alert-dismissible" data-dismiss="alert">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<!-- Masthead -->
<header class="text-center">
    <div class="container-fluid px-0" >
        <div id="map">
        </div>
        <div class="container" style="
        position: absolute;
        z-index: 400;
        top: 46%;
        left: 0;
        right: 0;
        margin: auto;">
            <div class="jumbotron transparentBackground">
                <h1 class="page-section-heading text-center text-uppercase text-secondary mb-0">Chake Denuncias</h1><br>
                <a class="btn btn-xl btn-primary" href="{% url 'map' %}">
                    <i class="fas fa-map mr-2"></i>
                        Ver Mapa
                </a>
            </div>
        </div>
    </div>
</header>
<!-- Seccion Sobre el Sitio -->
<section class="page-section portfolio" id="sobre">
    <div class="container">
        <!-- Sobre el sitio Heading -->
        <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Sobre el sitio</h2>
        <!-- Icon Divider -->
        <div class="divider-custom">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon">
                <i class="flag-icon flag-icon-py"></i>
            </div>
            <div class="divider-custom-line"></div>
      </div>
      <div class="row">
        <div class="col-lg-12 ml-auto">
            <p class="lead">
                Chake es una plataforma dedicada a mejorar la calidad de vida en nuestras comunidades al proporcionar un espacio donde los ciudadanos pueden reportar problemas urbanos. Estos reportes se visualizan en un mapa interactivo accesible para todos. La plataforma no solo facilita la denuncia de problemas, sino que también fomenta la transparencia y la colaboración entre ciudadanos y autoridades.
            </p>
        </div>
      </div>
    </div>
    <br>
</section>
<!-- El porque Section -->
<section class="page-section bg-primary text-white mb-0" id="elporque">
    <div class="container">
        <!-- About Section Heading -->
        <h2 class="page-section-heading text-center text-uppercase text-white">Porqué del sitio</h2>
        <!-- Icon Divider -->
        <div class="divider-custom divider-light">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon">
                <i class="fas fa-question"></i>
            </div>
            <div class="divider-custom-line"></div>
        </div>
      <!-- About Section Content -->
        <div class="row">
            <div class="col-lg-4 ml-auto">
                <p class="lead">
                    Fomentar la transparencia al hacer públicos los reportes ciudadanos, garantizando que las denuncias no sean ignoradas. Esta visibilidad genera una presión positiva para que las autoridades actúen con mayor rapidez y responsabilidad en la resolución de los problemas.
                </p>
            </div>
            <div class="col-lg-4 mr-auto">
                <p class="lead">
                    Impulsar la participación ciudadana al proporcionar una herramienta sencilla para que los ciudadanos reporten problemas en su entorno. Esta participación activa fortalece la colaboración entre la comunidad y las autoridades, promoviendo un entorno donde todos contribuyen al bienestar común.
                </p>
            </div>
            <div class="col-lg-4 mr-auto">
                <p class="lead">
                    Registrar y visualizar los reportes en tiempo real, proporcionando información precisa y actualizada sobre los problemas en diferentes áreas. Esta información es crucial para la implementación de políticas públicas más efectivas, permitiendo a las autoridades priorizar y abordar las necesidades más urgentes de la comunidad.
                </p>
            </div>
        </div>
    </div>
</section>
<!-- Stats Section -->
<section class="page-section mb-0" id="stats">
    <div class="container">
        <!-- Stats Section Heading -->
        <h2 class="page-section-heading text-center text-uppercase">Datos Agregados</h2>
        <!-- Icon Divider -->
        <div class="divider-custom">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon">
                <i class="fas fa-stream"></i>
            </div>
            <div class="divider-custom-line"></div>
        </div>
      <!-- Section Content -->
        <br><br>
        <div class="row">
            <div class="col-lg-4 ml-auto">
                <div class="card">
                    <img src="{% static 'app/img/woman_avatar.svg' %}" alt="Female Scientists" style="width:80%">
                    <br>
                    <div class="card_container bg-primary">
                        <h1 class="page-section-heading text-center text-white">{{ num_female_scientists }}</h1>
                        <p class="card-text text-center text-white">Investigadoras de entre<br><b>{{ min_age_female }}</b> y
                            <b>{{ max_age_female }}</b> años<br>
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 mr-auto">
                <div class="card bg-light">
                    <img src="{% static 'app/img/man_avatar.svg' %}" alt="Male Scientists" style="width:80%">
                    <br>
                    <div class="card_container bg-primary">
                        <h1 class="page-section-heading text-center text-white">{{ num_male_scientists }}</h1>
                        <p class="card-text text-center text-white">Investigadores de entre<br><b>{{ min_age_male }}</b> y
                            <b>{{ max_age_male }}</b> años<br>
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 mr-auto">
                <div class="card bg-light">
                  <img src="{% static 'app/img/institution.svg' %}" alt="Institution" style="width:80%">
                  <br>
                  <div class="card_container bg-primary">
                      <h1 class="page-section-heading text-center text-white">{{ num_institutions }}</h1>
                      <p class="card-text text-center text-white">Centros de Investigación en<br><b>{{ num_cities }}</b>
                          ciudades de <b>{{ num_countries }}</b> paises
                      </p>
                  </div>
                </div>
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-lg-4 mr-auto">
                <div class="card bg-light">
                    <img src="{% static 'app/img/mortarboard.svg' %}" alt="Posiciones" style="width:80%">
                    <br>
                    <div class="card_container bg-primary">
                        <h1 class="text-center text-white">{{ total_most_common_position }}</h1>
                        <p class="card-text text-center text-white">{{ name_most_common_position }},
                            {{ total_second_common_position }} {{ name_second_most_common_position }},
                            {{ total_third_most_common_position }} {{ name_third_most_common_position }}</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 mr-auto">
                <div class="card bg-light">
                    <img src="{% static 'app/img/areas.svg' %}" alt="Areas" style="width:80%">
                    <br>
                    <div class="card_container bg-primary">
                        <h2 class="text-center text-white">{{ top_area_f }}</h2>
                        <p class="card-text text-center text-white mb-2">Área más popular entre las <br>investigadoras ({{ per_top_area_f }}%)
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 mr-auto">
                <div class="card bg-light">
                    <img src="{% static 'app/img/book.svg' %}" alt="Areas" style="width:80%">
                    <br>
                    <div class="card_container bg-primary">
                        <h3 class="text-center text-white">{{ top_area_m }}</h3>
                        <p class="card-text text-center text-white mb-1">Área con más investigadores ({{ per_top_area_m }}%)</p>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <!-- <div class="row">
            <div class="col-lg-12 ml-auto">
                <p class="font-weight-normal text-center">Datos agregados hasta el momento</p>
            </div>
        </div> -->
    </div>
</section>
<script defer src="https://maps.googleapis.com/maps/api/js?key={{ GOOGLE_MAPS_API_KEY }}&callback=initMap"></script>
{% endblock %}